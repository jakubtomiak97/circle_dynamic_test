version: 2.1

setup: true

orbs: 
  path: circleci/path-filtering@1.0.0

workflows:
  setup:
    jobs:
      - path/filter:
          config-path: .circleci/common.yml
          base-revision:  main
          mapping: |
            apps/app1/.* app1 true .circleci/applications/app1.yml
            apps/app2/.* app2 true .circleci/applications/app2.yml
            apps/app3/.* app3 true .circleci/applications/app3.yml
